<p>Ce document est également disponible <a href="readme.fr.html">en français</a></p>
<h2 id="how-to-transform-an-existing-mission">How to transform an existing mission?</h2>
<h3 id="prerequisites">Prerequisites</h3>
<h4 id="manual-installation">Manual installation</h4>
<p>You need a few things set up on your PC for these scripts to function.</p>
<ul>
<li>LUA : you need a working LUA interpreter, in your PATH, ready to be called with the <code>lua</code> command</li>
<li>7zip : you need 7zip, or another zip tool, in your PATH, ready to be called with the <code>7zip</code> command</li>
<li>Powershell : you need Powershell, and you need it to be configured to allow script execution (read <a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/set-executionpolicy?view=powershell-7.1">this article</a>) ; basically you need to run this command in an elevated (admin) Powershell prompt : <code>Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope LocalMachine</code></li>
<li>npm : you need the NPM package manager from NodeJS to get the VEAF mission creation tools ; see <a href="https://www.npmjs.com/get-npm">here</a></li>
</ul>
<h4 id="using-chocolatey">Using Chocolatey</h4>
<p>The required tools can easily be installed using <em>Chocolatey</em> (see <a href="https://chocolatey.org/">here</a>).</p>
<p><strong>WARNING</strong> : do not do both <em>manual installation</em> and <em>Chocolatey installation</em></p>
<p>To install Chocolatey, use this command in an elevated (admin) Powershell prompt : <code>Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))</code></p>
<p>After <em>Chocolatey</em> is installed, use these simple commands (in a regular command prompt) to install the required tools :</p>
<ul>
<li>LUA : <code>choco install -y lua</code></li>
<li>7zip : <code>choco install -y 7zip.commandline</code></li>
<li>npm : <code>choco install -y nodejs</code></li>
</ul>
<h3 id="choose-a-starting-mission">Choose a starting mission</h3>
<p>You must start with a DCS mission file as the basis of your VEAF scripted mission.</p>
<p>We provided a blank canvas for Caucasus (<code>empty-caucasus.miz</code>), Syria (<code>empty-syria.miz</code>) and Persian Gulf (<code>empty-persiangulf.miz</code>)</p>
<p>Copy the mission of your choice in the root of this folder, and name it <code>template.miz</code>.</p>
<h3 id="run-the-init.cmd-script">Run the init.cmd script</h3>
<p>In a command shell, simply type <code>init.cmd</code> with the name of the mission you want to build (no space, no underscore, please).</p>
<p>The name of the mission will be the name of your project. It should also be the same name as your mission folder (not mandatory, but recommended).</p>
<p>It should not contain any space or underscore, and no trailing .miz (it’s not a mission file name) !</p>
<h4 id="example">Example</h4>
<p>Let’s say I want to initialize a new mission called “My cool and shiny mission - Caucasus”.</p>
<p>I’ll start with replacing spaces with dashes : “My-cool-and-shiny-mission-Caucasus”. I’ll make a fresh copy of this <code>VEAF-mission-directory-template</code> folder and name it <code>My-cool-and-shiny-mission-Caucasus</code> (we’ll refer to this as “mission folder”).</p>
<p>As I want to create a mission in Caucasus, and I have no existing mission, I’ll rename the <code>empty-caucasus.miz</code> to <code>template.miz</code> in my mission folder.</p>
<p>Then I’ll start a command prompt, <code>cd</code> into the mission folder, and run : <code>init.cmd My-cool-and-shiny-mission-Caucasus</code></p>
<p>The script will take <code>template.miz</code> (which is in fact <code>empty-caucasus.miz</code>, which I renamed) as its basis, and prepare the mission folder with everything needed to compile the mission (create the <code>.miz</code> file).</p>
<h3 id="advanced-settings">Advanced settings</h3>
<h4 id="selecting-a-specific-template-mission-file">Selecting a specific template mission file</h4>
<p>By default, the script looks for a <code>template.miz</code> file and uses it as the basis for the new mission.</p>
<p>It’s possible to specifiy a specific file as the template ; for example : <code>init.cmd My-cool-and-shiny-mission-Caucasus empty-caucasus.miz</code></p>
<h4 id="setting-the-logging-level-of-the-trigger-injector">Setting the logging level of the trigger injector</h4>
<p>By setting a value to the <code>LUA_SCRIPTS_DEBUG_PARAMETER</code> environment variable, it is possible to tune the logging level of the trigger injector LUA script.</p>
<p>Possible values are :</p>
<ul>
<li><code>-debug</code> : debug level, additional information</li>
<li><code>-trace</code> : trace level, everything is written</li>
</ul>
<p>This is useful to understand why a specific run does not work</p>
<h4 id="setting-the-location-of-the-7zip-executable">Setting the location of the 7zip executable</h4>
<p>If your 7zip tool is not in your PATH, you can set its location in the <code>SEVENZIP</code> environment variable. It’s a string which should point to the <code>7za</code> executable (e.g. <code>c:\tools\7zip\bin\7zip.exe</code>)</p>
<h4 id="setting-the-location-of-the-lua-executable">Setting the location of the LUA executable</h4>
<p>In the same way, you can set its location of the LUA executable in the <code>LUA</code> environment variable. It’s a string which should point to the <code>lua</code> executable (e.g. <code>c:\tools\lua\bin\lua.exe</code>)</p>
<h4 id="skip-the-pauses">Skip the pauses</h4>
<p>If you set the <code>NOPAUSE</code> environment variable to “true”, then the pauses in the script will not be marked.</p>
<h2 id="how-to-use-this---graphic-version">How to use this - graphic version</h2>
<h3 id="initialize-a-new-mission-folder-with-this-tool">Initialize a new Mission Folder with this tool</h3>
<figure>
<img src="https://user-images.githubusercontent.com/172286/109006666-9a96ee80-76ab-11eb-871c-a77a1ffa4fd9.jpg" alt="schema" /><figcaption aria-hidden="true">schema</figcaption>
</figure>
<h2 id="how-to-build-a-mission">How to build a mission</h2>
<p>Please see <a href="readme-build.html">this document</a>.</p>
